window.sc3s={_record:286,_tCacheKey:"sc3s:t",_taCacheKey:"sc3s:ta",_gCacheKey:"sc3s:g",_ngCacheKey:"sc3s:ng",_lCacheKey:"sc3s:l",_ms:{January:"1",February:"2",March:"3",April:"4",May:"5",June:"6",July:"7",August:"8",September:"9",October:"10",November:"11",December:"12"},_data:{threes:null,games:null,nextGame:null,live:null},init:function(){this._filterBackgroundImage(),this._preloadFromCache(),this._startPoll(),$(window).on("resize",this._onResize.bind(this))},_startPoll:function(){this._getData(),setInterval(this._getData.bind(this),3e4)},_updateUI:function(){if(this._data.threes&&this._data.games){var t=Math.floor(this._data.threes/this._data.games*82);$("#pace > span:first-child").html(t),$("#threes > span:first-child").html(this._data.threes),$("#games > span:first-child").html(this._data.games),$("#pct > span:first-child").html(this._data.pct),$("#3ptrs-label").html(parseInt(this._data.threes)>99?"3PTRS":"3 PTRS"),this._data.live?($("#l").show(),$("#nl").hide()):($("#ng").html(this._data.nextGame),$("#nl").show(),$("#l").hide()),this._updateGraph()}},_getData:function(){$.get("data/stats.php",this._onData.bind(this))},_setCached:function(t,e){return"undefined"!=typeof Storage?window.localStorage.setItem(t,e):void 0},_getCached:function(t){return"undefined"!=typeof Storage?window.localStorage.getItem(t):void 0},_preloadFromCache:function(){this._data.threes=this._getCached(this._tCacheKey),this._data.threesAttempted=this._getCached(this._taCacheKey),this._data.games=this._getCached(this._gCacheKey),this._data.nextGame=this._getCached(this._ngCacheKey),this._data.live=this._getCached(this._lCacheKey),this._data.pct=this._computePct(),this._updateUI()},_onServerCachedData:function(t){this._setLocalCache(t.threes,t.threes_attempted,t.games,t.next),this._updateUI()},_computePct:function(t,e){var t=t||this._data.threes,e=e||this._data.threesAttempted;if(t&&e){var t=parseInt(this._data.threes),e=parseInt(this._data.threesAttempted);return parseFloat(t/e*100).toFixed(1)}},_onData:function(t){if(t=JSON.parse(t),!t.update)return this._onServerCachedData(t);var e=$(t.contents),a=$(t.live_contents),s=t.live,i=e.find(".yom-sports-player-next-game .list .date h3").html().split(" "),h=this._ms[i[1]]+"/"+i[2],n=e.find('[summary="Player Season Totals"] th:contains("2015-16")').parent().find(".3-point-shots-made").html(),r=e.find('[summary="Player Season Totals"] th:contains("2015-16")').parent().find(".3-point-shots-attemped").html(),c=e.find('[summary="Player Season Totals"] th:contains("2015-16")').parent().find(".games").html();if(s){var d=a.find("th#table-1-nba\\.p\\.4612");if(d.length){var o=parseInt(d.parent().find(".three-pointers").html().split("-")[0]),l=parseInt(d.parent().find(".three-pointers").html().split("-")[1]);n=parseInt(n)+o,r=parseInt(r)+l,c=parseInt(c)+1}else s=void 0}this._setLocalCache(n,r,c,h,s),$.post("u.php",{t:n,ta:r,g:c,ng:h}),this._updateUI()},_onResize:function(t){this._filterBackgroundImage(),this._updateGraph(t)},_filterBackgroundImage:function(){var t=$(window).width();$("#sc-img1, #sc-img2").toggleClass("filter",450>=t)},_updateGraph:function(t){var e=$("#sc-img1").is(":visible")?$("#sc-img1"):null;t&&($("#r-mtr, #curr").removeClass("transition"),$("#r-mtr, #curr").height(0)),$("#curr-indctr .t-num").html(this._data.threes),$("#r-mtr, #curr").addClass("transition"),$("#r-mtr").height(e?e.height()+"px":"100%"),$("#curr").height(this._data.threes/this._record*100+"%")},_setLocalCache:function(t,e,a,s,i){return this._data.threes=t,this._data.threesAttempted=e,this._data.games=a,this._data.nextGame=s,this._data.live=i,this._data.pct=this._computePct(),this._setCached(this._tCacheKey,t),this._setCached(this._taCacheKey,e),this._setCached(this._gCacheKey,a),this._setCached(this._ngCacheKey,s),i?void this._setCached(this._lCacheKey,i):window.localStorage.removeItem(this._lCacheKey)},cp:function(t){t=t.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var e=location.search.match(new RegExp("[?&]"+t+"=([^&]+)(&|$)"));e||(window.location="http://scthrees.com");var a=decodeURIComponent(e[1].replace(/\+/g," "));"asdf78901234jkl"!=a&&(window.location=window.location.origin)}};